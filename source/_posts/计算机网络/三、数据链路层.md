---
title: 三、数据链路层
date: 2019-04-29 18:44:07
tags:
  - 网络
  - 学习笔记
categories:
  - 计算机网络学习笔记
---


## 数据链路层功能
将网络层的数据在不可靠的物理设备上可靠地传输给相邻接点的目标，使之对网络层表现为一条无差错的链路。

1. 为网络层提供服务：无确认无连接、有确认无连接、有确认有连接（有连接一定要确认）
2. 链路管理
3. 组帧
4. 流量控制（限制发送方数据发送速率使之配合接收方速度）
5. 差错控制 

<!-- more -->

### 组帧
将数据的前后部分添加首部和尾部构成帧。在收到帧后通过标记就可以识别帧的开始和结束从而识别出数据。

首部和尾部的作用：
1. 帧定界
2. 帧同步

#### 组帧方法
1. 字符计数法
2. 字符填充法
3. 零比特填充法
4. 违规编码

### 差错控制
**校验方式：**
1. 奇偶校验
2. CRC循环冗余校验码
3. 海明码

### 流量控制
链路层的流量控制是点对点的，传输层是端对端的
链路层手段是接收方收不到就不回复确认，传输层是接收端发送出一个窗口公告

#### 流量控制方法
##### 停止-等待协议
每发送一个帧就需要等待确认
设置计时器，时间应该超过平均RTT
必须保留发送一个帧的副本
信道利用率太低
$$信道利用率=\frac{L/C}{T}$$

T内发送L比特数据，T为发送一个帧的时间加一个RTT（ 收到确认的总时间），C为发送方数据传输率

##### 滑动窗口协议
1. **后退N帧协议（GBN）**
接收端只按序接收
累积确认，表明已经收到了N和之前的所有帧。
偶尔捎带确认，在接收端给发送方发送时可以顺便发送确认信息
若超时，则发送已发出尚未得到确认的所有帧
用n个比特对帧编号，窗口长度应小于$2^n-1$

2. **选择重传协议（SR）**
解决后退N帧协议弊端
设置单个确认，同时加大接收窗口，设置缓存，用来缓存乱序帧
接收端对窗口内的帧来者不拒
发送窗口等于接收窗口$窗口长度=2^{n-1}$

## 数据链路层的两种信道
1. 点对点链路
2. 广播式链路

## 介质访问控制
### 静态划分信道（多路复用）
在发送数据之前预先对信道进行划分
1. 频分多路复用（FDM）
在不同频段分配不同用户，但是不同用户带宽不同。
2. 时分多路复用（TDM）
利用时间划分为一段不同长度来发送数据(类似分时操作系统)
3. 波分多路复用（WDM）
本质就是光的频分多路复用，通过波长来区分
4. 码分多路复用（CDM） 

### 动态划分信道
信道并非在发送之前固定分配

#### 随机访问
1. ALOHA协议
不监听信道，随机重发，想发就发
发生冲突之后，接收方会错误，则不发送确认
“时隙ALOHA协议”：另所有用户在相同的时间片内同步。发生冲突就必须等到下一个时间片

2. CSMA协议
CS：载波侦听，发送之前要侦听一下有没有计算机在发送数据。
MA：多点接入,许多计算机以多点接入的方式接到一根总线上。
> 侦听坚持：
1-坚持：空闲直接传输，忙则直接传输。若有两个发送方则碰撞不可避免
非坚持：忙就不继续监听，有可能有时候没有发送方，造成浪费
p-坚持：空闲则以概率p直接传输，综合了上两种优点，但是发生冲突时还是要坚持发送完，造成浪费。

3. CSMA/CD协议
由于需要边发送时边检测是否有人发送，所以只能在半双工的时候使用。
传播时延对载波监听有影响，所以边检测也可能造成冲突。所以就需要边发送边检测
碰撞后的重传时机：截断二进制指数规避算法
最小帧长：为了使此协议有意义定义的长度
$$\frac{帧长(bit)}{数据传输速率} \geq 2 \times 传播时延 $$
以太网规定最小帧长为64B，所以小于64B的都是由于冲突停止造成的无效帧

4. CSMA/CA协议
CA：碰撞避免(主要用于无线局域网)

#### 轮询访问
1. 轮询协议：主节点轮流邀请从属节点发送数据。
2. 令牌传递协议：通过令牌环网传递可以保证无碰撞，一般用于负载较重的网络。

## 局域网
1. 以太网
2. 令牌环网(已经不再使用)
3. 无线局域网WLAN，IEEE802.11

> IEEE802标准将数据链路层划分为逻辑链路控制子层（LLC）和介质访问控制子层（MAC）

### 以太网
采用CSMA/CD，物理拓扑为星型，逻辑拓扑总线型，IEEE802.3
提供无连接，不可靠的服务

### 10BASE-T
BASE：传输基带信号 T：采用双绞线 10：传输速率为10Mb/s
采用曼彻斯特编码

### 以太网MAC帧
目前最常用的一般是以太网V2

## 链路层的设备